name: Deploy Docs
on:
    push:
        branches: [main]
        paths: ["docs/**"]

jobs:
    deploy:
        runs-on: ubuntu-latest
        permissions:
            contents: write
        steps:
            - uses: actions/checkout@v4
            - name: Install mdbook
              run: |
                  mkdir mdbook
                  curl -L https://github.com/rust-lang/mdbook/releases/download/v0.4.36/mdbook-v0.4.36-x86_64-unknown-linux-gnu.tar.gz | tar -xz -C mdbook
                  echo "$(pwd)/mdbook" >> $GITHUB_PATH
            - name: Build Book
              run: mdbook build docs/book
            - name: Deploy to GitHub Pages
              uses: peaceiris/actions-gh-pages@v3
              with:
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  publish_dir: ./docs/book/book
